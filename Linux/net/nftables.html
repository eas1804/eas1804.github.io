<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>nftables</title>
    <link rel="stylesheet" href="../../style.css">
  </head>

<body>
<h2>nftables  </h2>
<ol>
<li><a href=nftables_save.html>Просмотр, сохранение, добавление, удаление</a>
<li><a href="nftables_input.html">Цепочка input</a>
<li><a href=nftables_forward.html>Цепочка forward</a>
<li><a href=nftables_out.html>Цепочка output</a>
<li><a href=nftables_nat.html>NAT</a>
<li><a href=nftables_ipv6_block.html>Блокировать ipV6</a>
<li><a href=nftables.conf>Шаблон</a>
</ol>


<h3>Детали</h3>
<li>Установка
<code>apt install nftables -y  &&
systemctl enable nftables  &&
systemctl start nftables</code></p>

<li>Таблицы и цепочки могут быть привязаны к различным семействам протоколов <b>ip, ip6, inet</b>
<p>Если создаем таблиц для inet, то и внутри таблицы все inet
<li><b>counter</b>  - отслеживать количество пакетов и байт, которые проходят через эти правила.
<li>Переводит команду из tptables
<p><code>iptables-translate</code></p>
Например
<p><code>iptables-translate -A FORWARD -i vmbr1 -o vmbr0 -j ACCEPT -m comment --comment "Lan->WAN"</code></p>
<li>Перечитать правила при поднятии интерфейса
<p><code>systemctl edit nftables.service</code></p>
Добавляем
<pre>
[Unit]
After=network-online.target
Wants=network-online.target
</pre>
<p>Перезапускаем
<p><code>systemctl daemon-reload</code></p>
<p><code>systemctl restart nftables</code></p>


</ol>
</body>
  </html>
